\section{Finite-dimensional systems}\label{sec:finite-quantum}\label{sec:pw:theory_last}
\epigraph{\textelp{} discreteness in the world is simply the Fourier transform of compactness.}{%
  \emph{Physics and the Integers} \parencite{Tong_Integers}%
}

\noindent
An experimental illustration of the Page--Wootters model will be discussed in Sec. \ref{sec:pw:qubit}.
It is based on a clock
(defined through the corresponding frequency operator)
which has two discrete levels only.

Finite-dimensional systems are of interest, phenomenologically,
and in general easier to implement,
both experimentally and numerically.
However,
finite-dimension Hilbert spaces
present diffilcuties in identifying canonically conjugate
pairs, and one cannot use the same explicit formalism
that would be used for observables with a continuous spectrum.
Moreover, operators satisfying a canonical
commutation relation such as
\begin{equation}\label{eq:canonical_commutation_in_time}
  [\op{T}, \op{\Omega}] = i
\end{equation}
cannot be both bounded, therefore cannot exist in a finite-dimensional space.

This problem was studied in detail in
\cite{FiniteHilb}. It was shown therein
that statisfying the canonical commutation relation 
is not essential to build operators representing physical observables
with the same role of position and momentum.\footnote{
  Or $T$ and $\hbar\Omega$
  in $\hilb{H}_T$ for a finite-dimensional Page and Wootters model.
}

Discrete, bounded, position-like and momentum-like operators can be obtained from
each other via
the \term{finite} or \term{dicrete} \term{Fourier transform} (DFT).
In our case, we are particularly interested in relating the
time operator $\op{T}$ and the ``energy'' operator $-\hbar\op{\Omega}$
in $\hilb{H}_T$ ---via the angular frequency operator $\op{\Omega}$ which, in the continuous limit, would satisfy
eq.~\eqref{eq:canonical_commutation_in_time} exactly.

\subsection{Discrete Fourier transform}

We will add some more details to the analysis of \citereset\cite{FiniteHilb} with
additional emphasis on sign and scaling conventions which will affect
our computation. We will then interpret the results in the context of
the Page--Wootters model in particular with regards to the temporal subspace
$\hilb{H}_T$.

Let us start with a continuous system where the Fourier transform $\phi \eqbydef \mathcal{F}\psi$ of
an integrable function $\psi: \mathbb{R} \to \mathbb{C}$ is defined as
\begin{equation}\label{eq:fourier_transform:def}
  \phi(\omega) = \left(\mathcal{F}\psi\right) (\omega) =
    \frac{1}{\sqrt{2\pi}} \int \dd{t} \psi(t) \E^{- \iu t \omega} \text{,} 
\end{equation}
and the well known \term{inversion} property
\begin{equation}\label{eq:inverse_fourier_transform:def}
  \psi(t) = \left(\mathcal{F}^{-1} \phi \right) (t) =
    \frac{1}{\sqrt{2\pi}} \int \dd{\omega} \phi(\omega) \E^{\iu t \omega} 
\end{equation}
can be can be proven (see e.g. \cite{Folland:Fourier}).

Eq.~\eqref{eq:inverse_fourier_transform:def} can be interpreted
as a function of time
expressed as a linear superposition
of ``pure frequencies'' $\E^{\iu \omega t}$,
with coefficients given by the Fourier transform $\phi(\omega)$.

In a discrete system, a finite interval $(0, \Delta{T})$ is considered,
equally divided in $N$ sub-intervals. If we set $\delta{T} = \frac{\Delta{T}}{N}$,
$N$ discrete points in time can be considered
\begin{equation}\label{eq:DFT:t_spectrum}
  t_n \in \setof{0,\,\hdots,\,(N-1)\delta{T}} \text{.}
\end{equation} 
%
The corresponding frequencies are multiples of the fundamental frequency $\nu_1 = \frac{1}{\Delta{T}}$.
The fundamental \emph{angular} frequency is therefore $\omega_1 = \frac{2\pi}{\Delta{T}}$ and the
$N$ sample values are:\footnote{
  See
  \cite[Ch. ``The Discrete Fourier Transform'']{Oppenheim:Int3}.
}
\begin{equation}\label{eq:DFT:omega_spectrum}
  \omega_n \in \setof{0, \frac{2\pi}{\Delta{T}}, \dots, \frac{2\pi(N-1)}{\Delta{T}}} \text{.}
\end{equation} 


% %\citereset
% It holds\footnote{
%   Contrary to what indicated in eq. (8) of \cite{FiniteHilb},
%   it can be easily verified that,
%   if $ \op{p} = F x F^{\dagger} $,
%   the correct inverse relation is
%   $ x = F^{\dagger} p F$ and not $ -x = F p F^{\dagger} $.
% } \parencite{FiniteHilb}:
% \begin{gather}\label{eq:FourierCanonicalRelations}
%   \op{\Omega}_{\mathrm{nat.}} = F \op{T}_{\mathrm{nat.}} F^{\dagger}\text{;} \quad
%   \op{T}_{\mathrm{nat.}} = F^{\dagger} \op{\Omega}_{\mathrm{nat.}} F
% \end{gather}
% where, in the ``position'' (or \emph{time}) finite eigenbasis,
% \begin{equation}
%   F = \frac{1}{\sqrt{N}} \sum_{m,n=0}^{N-1} \exp[i\frac{2\pi mn}{N}] \ketbra{m}{n} \, \text{,}
% \end{equation}
% while in the frequency eigenbasis
% \begin{equation}
%   F^{\dagger} = \frac{1}{\sqrt{N}} \sum_{\omega,\eta=0}^{N-1} \exp[-i\frac{2\pi \omega\eta}{N}] \ketbra{\omega}{\eta} \, \text{,}
% \end{equation}
% with $N$ being the finite dimension of the Hilbert space.

It holds
\begin{gather}\label{eq:DFT:deltas}
  \delta\Omega \delta T = \frac{2\pi}{N} \, \text{;} \quad
  \Delta\Omega \Delta T = 2\pi N \, \text{.}
\end{gather}

The discrete reformulation\footnote{
  See e.g.
  \cite[Ch. ``The Discrete Fourier Transform'']{Oppenheim:Int1,Oppenheim:Int3};
  \cite[Ch. 5]{ProakisManolakis}.
}
of \eqref{eq:fourier_transform:def} and \eqref{eq:inverse_fourier_transform:def}
is
\begin{equation}\label{eq:DFT:def}
  \phi_n \eqbydef \phi(\omega_n) = \frac{1}{\sqrt{N}} \sum_{m=0}^{N-1} \psi_m \E^{-\iu n m 2 \pi / N}
\end{equation}
and, respectively,
\begin{equation}\label{eq:IDFT:def}
  \psi_m \eqbydef \psi(t_m) = \frac{1}{\sqrt{N}} \sum_{n=0}^{N-1} \phi_n \E^{\iu n m 2 \pi / N} \text{.}
\end{equation}
Eq.~\eqref{eq:DFT:def} is the definition of the \term{Discrete Fourier Transform} (DFT).
Eq.~\eqref{eq:IDFT:def} defines the \term{Inverse Discrete Fourier Transform} (IDFT).
The factor $\frac{1}{\sqrt{N}}$ is chosen to guarantee \emph{unitarity} of the transformation:
$\sum_{n=0}^{N-1} \abs{\psi_n}^2 = \sum_{n=0}^{N-1} \abs{\phi_n}^2$.

From eqs.~\eqref{eq:DFT:def} and~\eqref{eq:IDFT:def} one can identify the
\term{Discrete Fourier Matrix}, with elements $F_{mn}$
(and its inverse,
with elements $F_{mn}^{\dagger}$):
\begin{align}
  F_{mn}            &= \frac{1}{\sqrt{N}} \E^{-\iu n m 2 \pi / N} \;\text{;} &
  F_{mn}^{\dagger}  &= \frac{1}{\sqrt{N}} \E^{ \iu n m 2 \pi / N}
  \text{.}
\end{align}

The (discrete) Fourier transform can be used to transform the time representation
of a vector $\ket{\psi}_T \in \hilb{H}_T$ into its angular frequency representation.
Namely, the sequence\footnote{
  We will omit the subscript ``${}_{T}$'' from the following equations
  when it is assumed ---and obvious, by the context and the other symbols used---
  that we are operating in the subspace $\hilb{H}_T$
  of the Page--Wootters model.
}
$\left\{\braket{t_n}{\psi}\right\}_{n=0, \dots, N-1}$ into
$\left\{\braket{\omega_m}{\psi}\right\}_{m=0, \dots, N-1}$:
\begin{equation}\label{eq:DFT:chrepr}  % TODO: inverse too?
  \braket{\omega_{m}}{\psi} = \sum_n F_{mn} \braket{t_n}{\psi} \text{.}
\end{equation}
It is convenient to write down the ``complex conjugate'' of eq.~\eqref{eq:DFT:chrepr} as well:
\begin{equation}\label{eq:DFT:chrepr:cconj}  % TODO: inverse too?
  \braket{\psi}{\omega_{m}} = \sum_n F_{mn}^{\dagger} \braket{\psi}{t_n}
\end{equation}
(recalling that $F$ is symmetric and
$F_{mn}^{*} = F_{mn}^{\dagger}$,
$\forall m,n \in \setof{0, \dots, N-1}$).

As $\ket{\psi}$ (respectively: $\bra{\psi}$) is a generic ket (or bra) of the Hilbert space,
from eqs.~\eqref{eq:DFT:chrepr:cconj} and~\eqref{eq:DFT:chrepr:cconj} it follows:
\begin{align}
  \label{eq:DFT:bra}  \bra{\omega_{m}} &= \sum_n F_{mn}           \bra{t_n} \,\text{,}  \\
  \label{eq:DFT:ket}  \ket{\omega_{m}} &= \sum_n F_{mn}^{\dagger} \ket{t_n} \,\text{.}
\end{align}
This shows that the Fourier matrix can be used, not only to transform the components
of a vector from one eigenbasis to the canonically conjugate eigenbasis,
but also to obtain the eigenvectors themselves (of the canonically conjugate operator).

If we introduce the \term{Fourier operator}
$\displaystyle \op{F} \eqbydef \sum_{m,n=0}^{N-1} F_{mn} \ketbra{t_m}{t_n}$,
eq.~\eqref{eq:DFT:bra} can be reformulated as
\begin{equation}
  \label{eq:DFO:bra}  \bra{\omega_{m}} = \bra{t_m} \op{F} \text{.}
\end{equation}
Similarly, eq.~\eqref{eq:DFT:ket} can be expressed as
\begin{equation}
  \label{eq:DFO:ket}  \ket{\omega_{m}} = \op{F}^{\dagger} \ket{t_m} \text{.}
\end{equation}
%
Finally, we use the spectral decomposition of $\op{\Omega}$,
the equations \eqref{eq:DFO:bra} and~\eqref{eq:DFO:ket} above,
and the fact that $\omega_{m} = \frac{2\pi}{N(\delta{T})^{2}} t_{m}$
from eqs.~\eqref{eq:DFT:t_spectrum}, \eqref{eq:DFT:omega_spectrum} and~\eqref{eq:DFT:deltas}
to obtain:
\begin{multline}\label{eq:DFT:OmegaFTF}
  \op{\Omega} = \sum_{m} \omega_{m} \ketbra{\omega_{m}} =
  \sum_{m} \omega_{m} \op{F}^{\dagger} \ketbra{t_{m}} \op{F} =
  \\
  \frac{2\pi}{N(\delta{T})^{2}} \op{F}^{\dagger} \left(\sum_{m}t_{m}\ketbra{t_{m}}\right) \op{F} =
  \\
  \frac{2\pi}{N(\delta{T})^{2}} \op{F}^{\dagger} \op{T} \op{F} =
  \frac{2\pi N}{\qty(\Delta T)^2} \op{F}^{\dagger} \op{T} \op{F}
  \text{.}
\end{multline}
%
Taking the ``conjugate'' of all the computation
from eq.~\eqref{eq:DFT:chrepr} to \eqref{eq:DFT:OmegaFTF}, it can also be proven that
\begin{multline}
  \op{T} = \dots \\ = 
    \frac{2\pi}{N(\delta\Omega)^2}        \op{F} \op{\Omega} \op{F}^{\dagger} =
    \frac{2\pi N}{\qty(\Delta\Omega)^2}   \op{F} \op{\Omega} \op{F}^{\dagger}
    \text{.}
\end{multline}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\noindent{\color{red} \rule{\linewidth}{1pt}}  % 'TODO'
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Please note the % \eqref{eq:FourierCanonicalRelations}
(\dots)
is valid in ``natural'' units,
in the sense that
both ``time'' and ``frequency'' 
always have (and only have) integer eigenvalues $\setof{0, 1, \dots, N-1}$.
The operator $\op{T}_{\mathrm{nat.}}$ and $\op{\Omega}_{\mathrm{nat.}}$ are defined indeed as
$\op{T}_{\mathrm{nat.}} = \sum_{n=0}^{N} n \ketbra{n}$ and
$\op{\Omega}_{\mathrm{nat.}} = \sum_{\omega=0}^{N} \omega \ketbra{\omega}$
(\citereset\cite{FiniteHilb} defines ``position'' $\op{x}$ and ``momentum'' $\op{p}$ in a similar fashion).

% Please note the \eqref{eq:FourierCanonicalRelations} is valid in normalized (``natural'') units
% where ``time'' and ``frequency'' are in fact respectively
% \term{samples} and \emph{cycles/samples rate},
% in a similar sense as in digital signal processing theory
% \parencite[469, 490]{Carlson}.

More generally, one is interested in studying a time interval
between $t=0$ and an arbitrary real value $\Delta{T}$,
the time interval being split in $N$ sub-intervals of length $\delta{T}$
so that $N\delta{T} = \Delta{T}$.
In other words, $\delta T$
is the size of a ``temporal sample'', or the size of a discrete
step in the clock;
and $\Delta T = N\delta T$ is the range of the clock.
The corresponding time operator $\op{T}$
is expected therefore to have spectrum $\setof{0, \delta{T}, \dots, (N-1)\delta{T}}$,
while the eigenvalues of the angular frequency operator $\op{\Omega}$
are expected to be multiples of
$\frac{2\pi}{\Delta{T}}$, which is
the fundamental
angular frequency for the discrete Fourier analysis.\footnote{
  See
  \cite[chapters
    ``The Discrete Fourier Transform'' and
    ``Fourier Analysis of Signals Using the Discrete Fourier Transform'']{Oppenheim:Int1,Oppenheim:Int3}.
}
The spectrum of $\op{\Omega}$ would then be $\setof{0, \frac{2\pi}{\Delta{T}}, \dots, \frac{2\pi(N-1)}{\Delta{T}}}$.
By defining $\delta{\Omega} = \frac{2\pi}{T}$,
one can easily verify that $\frac{\op{T}}{\delta{T}}$ and $\frac{\op{\Omega}}{\delta{\Omega}}$
have the same property of $\op{T}_{\mathrm{nat.}}$ and $\op{\Omega}_{\mathrm{nat.}}$.  
By making such substitution directly in (xxx), % eq.~\eqref{eq:FourierCanonicalRelations},
with some simple algebra, it follows:
\begin{gather}
  \label{eq:SI_Fourier:Omega}
    \op{\Omega} = \frac{2\pi}{N(\delta T)^2} F \op{T} F^{\dagger} = \frac{2\pi N}{\qty(\Delta T)^2} F \op{T} F^{\dagger} \\
  \label{eq:SI_Fourier:T}
    \op{T} = \frac{2\pi}{N(\delta\Omega)^2} F^{\dagger} \op{\Omega} F = \frac{2\pi N}{\qty(\Delta\Omega)^2} F^{\dagger} \op{\Omega} F
  \, \text{.}
\end{gather}
% which is essentially the rescaling property of the Fourier transform
% \parencite[Ch. ``Fast Fourier Transform'']{NRC}.
The above ``normalization'' is the same that will be used
for numerical computation from Sec.~\ref{sec:pw:apps_first} onwards.



A benefit of finite-dimensional systems is the potential implementation on a finite array of
qubits in a quantum computer. The use of Discrete Fourier Transform extends the overlap
with technology and engineering to the domain of signal processing \parencite{FiniteHilb}.
In \emph{ordinary} quantum mechanics, the Fourier transform (discrete or continuous)
is generally used
to associate wavefunctions in position and momendum space
(whereas time and frequency are \emph{not} operators),
while in communication engineering it is used to convert signals
from the time to the frequency domain and vice versa.
Thanks to the introduction of the Hilbert space $\hilb{H}_T$,
the interpretation in terms of time and frequency
(or time and energy, up to a factor $\hbar$)
is applicable to quantum theory as well, not only formally
i.e. not in the sense of a mere operation among (``classical'') parameters;
but in the sense of conversion between representations of the
same quantum state vector with respect to different eigenbasis,
in full analogy with position and momentum in $\hilb{H}_S$.

\subsection{Uncertainty in finite-dimensional systems}\label{sec:finite_uncertainty}
\citereset
For canonical pairs of operators with a continuous, unbounded spectrum i.e.
$\op{q}$ and $\op{p} \eqbydef -i\hbar\op{\partial}_{q}$,
it is in general straightforward to prove that
$\qty[\op{q}, \op{p}] = i\hbar$ and therefore
$\Delta q \Delta p \geq {\frac{1}{2} \qty|\ev{\qty[\op{q}, \op{p}]}| = \frac{\hbar}{2}}$.

In finite $d$-dimensional Hilbert spaces, the above commutation relation doesn't hold
in general, and is less essential.
Canonically conjugate operators are related
through the (discrete) Fourier transform ($\op{p} = F\op{q}F^{\dagger}$)
rather then differentiation,
and uncertainty relations are based on
the properties of Fourier transformation
rather than commutation relations.

Particularly, the entropic uncertainty relation holds
(\cite[\s 2.4]{FiniteHilb}; \cite{Deutsch:Uncertainty}):
\begin{equation}
  S_q + S_p \geq \ln d
\end{equation}
where the quantities $S_q$ and $S_p$ are the \term{R\'enyi}-\term{Shannon} entropies
\parencite[\s {\it I}.A]{Wehner:Uncertainty}; in this case:
\begin{align}
  S_q &= -\sum_n \qty|\lambda_n |^2  \ln\qty|\lambda_n|^2 \\
  S_p &= -\sum_n \qty|\mu_n     |^2  \ln\qty|\mu_n    |^2
  \,\text{,}
\end{align}
with $\lambda_n$ and $\mu_n$ being the discrete ``wave functions'' in the
(generalized) position and momentum basis.
